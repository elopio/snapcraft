<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>snapcraft package &mdash; snapcraft 2.26 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.26',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="snapcraft 2.26 documentation" href="index.html" />
    <link rel="up" title="snapcraft" href="modules.html" />
    <link rel="next" title="snapcraft.integrations package" href="snapcraft.integrations.html" />
    <link rel="prev" title="snapcraft" href="modules.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="snapcraft-package">
<h1>snapcraft package<a class="headerlink" href="#snapcraft-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="snapcraft.integrations.html">snapcraft.integrations package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.integrations.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="snapcraft.integrations.tests.html">snapcraft.integrations.tests package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.integrations.tests.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.integrations.tests.html#module-snapcraft.integrations.tests.test_travis">snapcraft.integrations.tests.test_travis module</a></li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.integrations.tests.html#module-snapcraft.integrations.tests">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.integrations.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.integrations.html#module-snapcraft.integrations.travis">snapcraft.integrations.travis module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.integrations.html#module-snapcraft.integrations">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="snapcraft.internal.html">snapcraft.internal package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="snapcraft.internal.cache.html">snapcraft.internal.cache package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.cache.html#module-snapcraft.internal.cache">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="snapcraft.internal.deltas.html">snapcraft.internal.deltas package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.deltas.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.deltas.html#module-snapcraft.internal.deltas.errors">snapcraft.internal.deltas.errors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.deltas.html#module-snapcraft.internal.deltas">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="snapcraft.internal.pluginhandler.html">snapcraft.internal.pluginhandler package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.pluginhandler.html#subpackages">Subpackages</a><ul>
<li class="toctree-l5"><a class="reference internal" href="snapcraft.internal.pluginhandler.stage_package_grammar.html">snapcraft.internal.pluginhandler.stage_package_grammar package</a><ul>
<li class="toctree-l6"><a class="reference internal" href="snapcraft.internal.pluginhandler.stage_package_grammar.html#submodules">Submodules</a></li>
<li class="toctree-l6"><a class="reference internal" href="snapcraft.internal.pluginhandler.stage_package_grammar.html#module-snapcraft.internal.pluginhandler.stage_package_grammar.errors">snapcraft.internal.pluginhandler.stage_package_grammar.errors module</a></li>
<li class="toctree-l6"><a class="reference internal" href="snapcraft.internal.pluginhandler.stage_package_grammar.html#module-snapcraft.internal.pluginhandler.stage_package_grammar">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.pluginhandler.html#module-snapcraft.internal.pluginhandler">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="snapcraft.internal.sources.html">snapcraft.internal.sources package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.sources.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.sources.html#module-snapcraft.internal.sources.errors">snapcraft.internal.sources.errors module</a></li>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.sources.html#module-snapcraft.internal.sources">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="snapcraft.internal.states.html">snapcraft.internal.states package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="snapcraft.internal.states.html#module-snapcraft.internal.states">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.common">snapcraft.internal.common module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.deprecations">snapcraft.internal.deprecations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.dirs">snapcraft.internal.dirs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.errors">snapcraft.internal.errors module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.indicators">snapcraft.internal.indicators module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.libraries">snapcraft.internal.libraries module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.lifecycle">snapcraft.internal.lifecycle module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.log">snapcraft.internal.log module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.lxd">snapcraft.internal.lxd module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.meta">snapcraft.internal.meta module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.parser">snapcraft.internal.parser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.parts">snapcraft.internal.parts module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.project_loader">snapcraft.internal.project_loader module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal.repo">snapcraft.internal.repo module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.internal.html#module-snapcraft.internal">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="snapcraft.plugins.html">snapcraft.plugins package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.ant">snapcraft.plugins.ant module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.autotools">snapcraft.plugins.autotools module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.catkin">snapcraft.plugins.catkin module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.cmake">snapcraft.plugins.cmake module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.copy">snapcraft.plugins.copy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.dump">snapcraft.plugins.dump module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.go">snapcraft.plugins.go module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.godeps">snapcraft.plugins.godeps module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.gradle">snapcraft.plugins.gradle module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.gulp">snapcraft.plugins.gulp module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.jdk">snapcraft.plugins.jdk module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.kbuild">snapcraft.plugins.kbuild module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.kernel">snapcraft.plugins.kernel module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.make">snapcraft.plugins.make module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.maven">snapcraft.plugins.maven module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.nil">snapcraft.plugins.nil module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.nodejs">snapcraft.plugins.nodejs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.plainbox_provider">snapcraft.plugins.plainbox_provider module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.python">snapcraft.plugins.python module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.python2">snapcraft.plugins.python2 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.python3">snapcraft.plugins.python3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.qbs">snapcraft.plugins.qbs module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.qmake">snapcraft.plugins.qmake module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.rust">snapcraft.plugins.rust module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.scons">snapcraft.plugins.scons module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.tar_content">snapcraft.plugins.tar_content module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins.waf">snapcraft.plugins.waf module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.plugins.html#module-snapcraft.plugins">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="snapcraft.storeapi.html">snapcraft.storeapi package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.storeapi.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.storeapi.html#module-snapcraft.storeapi.compat">snapcraft.storeapi.compat module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.storeapi.html#module-snapcraft.storeapi.constants">snapcraft.storeapi.constants module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.storeapi.html#module-snapcraft.storeapi.errors">snapcraft.storeapi.errors module</a></li>
<li class="toctree-l2"><a class="reference internal" href="snapcraft.storeapi.html#module-snapcraft.storeapi">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-snapcraft.common">
<span id="snapcraft-common-module"></span><h2>snapcraft.common module<a class="headerlink" href="#module-snapcraft.common" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-snapcraft.config">
<span id="snapcraft-config-module"></span><h2>snapcraft.config module<a class="headerlink" href="#module-snapcraft.config" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="snapcraft.config.Config">
<em class="property">class </em><code class="descclassname">snapcraft.config.</code><code class="descname">Config</code><a class="reference internal" href="_modules/snapcraft/config.html#Config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Hold configuration options in sections.</p>
<p>There can be two sections for the sso related credentials: production and
staging. This is governed by the UBUNTU_SSO_API_ROOT_URL environment
variable. Other sections are ignored but preserved.</p>
<dl class="method">
<dt id="snapcraft.config.Config.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="snapcraft.config.Config.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>option_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.get" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="snapcraft.config.Config.is_empty">
<code class="descname">is_empty</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.is_empty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.is_empty" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="snapcraft.config.Config.load">
<code class="descname">load</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.load"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.load" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="snapcraft.config.Config.save">
<code class="descname">save</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="snapcraft.config.Config.save_path">
<em class="property">static </em><code class="descname">save_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.save_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.save_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="snapcraft.config.Config.set">
<code class="descname">set</code><span class="sig-paren">(</span><em>option_name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/config.html#Config.set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.config.Config.set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-snapcraft.file_utils">
<span id="snapcraft-file-utils-module"></span><h2>snapcraft.file_utils module<a class="headerlink" href="#module-snapcraft.file_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="snapcraft.file_utils.calculate_sha3_384">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">calculate_sha3_384</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#calculate_sha3_384"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.calculate_sha3_384" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate sha3 384 hash, reading the file in 1MB chunks.</p>
</dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.create_similar_directory">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">create_similar_directory</code><span class="sig-paren">(</span><em>source</em>, <em>destination</em>, <em>follow_symlinks=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#create_similar_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.create_similar_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a directory with the same permission bits and owner information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>str</em>) &#8211; Directory from which to copy name, permission bits, and
owner information.</li>
<li><strong>destintion</strong> (<em>str</em>) &#8211; Directory to create and to which the <cite>source</cite>
information will be copied.</li>
<li><strong>follow_symlinks</strong> (<em>bool</em>) &#8211; Whether or not symlinks should be followed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.executable_exists">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">executable_exists</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#executable_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.executable_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if &#8216;path&#8217; exists and is readable and executable.</p>
</dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.link_or_copy">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">link_or_copy</code><span class="sig-paren">(</span><em>source</em>, <em>destination</em>, <em>follow_symlinks=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#link_or_copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.link_or_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Hard-link source and destination files. Copy if it fails to link.</p>
<p>Hard-linking may fail (e.g. a cross-device link, or permission denied), so
as a backup plan we just copy it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>str</em>) &#8211; The source to which destination will be linked.</li>
<li><strong>destination</strong> (<em>str</em>) &#8211; The destination to be linked to source.</li>
<li><strong>follow_symlinks</strong> (<em>bool</em>) &#8211; Whether or not symlinks should be followed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.link_or_copy_tree">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">link_or_copy_tree</code><span class="sig-paren">(</span><em>source_tree</em>, <em>destination_tree</em>, <em>copy_function=&lt;function link_or_copy&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#link_or_copy_tree"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.link_or_copy_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a source tree into a destination, hard-linking if possile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source_tree</strong> (<em>str</em>) &#8211; Source directory to be copied.</li>
<li><strong>destination_tree</strong> (<em>str</em>) &#8211; Destination directory. If this directory
already exists, the files in <cite>source_tree</cite>
will take precedence.</li>
<li><strong>boundary</strong> (<em>str</em>) &#8211; Filesystem boundary no symlinks are allowed to cross.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.replace_in_file">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">replace_in_file</code><span class="sig-paren">(</span><em>directory</em>, <em>file_pattern</em>, <em>search_pattern</em>, <em>replacement</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#replace_in_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.replace_in_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches and replaces patterns that match a file pattern.
:param str directory: The directory to look for files.
:param str file_pattern: The file pattern to match inside directory.
:param search_pattern: A re.compile&#8217;d pattern to search for within</p>
<blockquote>
<div>matching files.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replacement</strong> (<em>str</em>) &#8211; The string to replace the matching search_pattern
with.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.requires_command_success">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">requires_command_success</code><span class="sig-paren">(</span><em>command</em>, <em>not_found_fmt=None</em>, <em>failure_fmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#requires_command_success"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.requires_command_success" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="snapcraft.file_utils.requires_path_exists">
<code class="descclassname">snapcraft.file_utils.</code><code class="descname">requires_path_exists</code><span class="sig-paren">(</span><em>path</em>, <em>error_fmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/file_utils.html#requires_path_exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.file_utils.requires_path_exists" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-snapcraft.formatting_utils">
<span id="snapcraft-formatting-utils-module"></span><h2>snapcraft.formatting_utils module<a class="headerlink" href="#module-snapcraft.formatting_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="snapcraft.formatting_utils.combine_paths">
<code class="descclassname">snapcraft.formatting_utils.</code><code class="descname">combine_paths</code><span class="sig-paren">(</span><em>paths</em>, <em>prepend</em>, <em>separator</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/formatting_utils.html#combine_paths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.formatting_utils.combine_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine list of paths into a string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>paths</strong> (<em>list</em>) &#8211; List of paths to stringify.</li>
<li><strong>prepend</strong> (<em>str</em>) &#8211; String to prepend to each path in the string.</li>
<li><strong>separator</strong> (<em>str</em>) &#8211; String to place between each path in the string.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.formatting_utils.format_path_variable">
<code class="descclassname">snapcraft.formatting_utils.</code><code class="descname">format_path_variable</code><span class="sig-paren">(</span><em>envvar</em>, <em>paths</em>, <em>prepend</em>, <em>separator</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/formatting_utils.html#format_path_variable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.formatting_utils.format_path_variable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a path-like environment variable definition that appends.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>envvar</strong> (<em>str</em>) &#8211; The environment variable in question.</li>
<li><strong>paths</strong> (<em>list</em>) &#8211; The paths to append to the environment variable.</li>
<li><strong>prepend</strong> (<em>str</em>) &#8211; String to prepend to each path in the definition.</li>
<li><strong>separator</strong> (<em>str</em>) &#8211; String to place between each path in the definition.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.formatting_utils.humanize_list">
<code class="descclassname">snapcraft.formatting_utils.</code><code class="descname">humanize_list</code><span class="sig-paren">(</span><em>items</em>, <em>conjunction</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/formatting_utils.html#humanize_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.formatting_utils.humanize_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a list into a human-readable string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>items</strong> (<em>list</em>) &#8211; List to humanize.</li>
<li><strong>conjunction</strong> (<em>str</em>) &#8211; The conjunction used to join the final element to
the rest of the list (e.g. &#8216;and&#8217;).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="snapcraft.formatting_utils.pluralize">
<code class="descclassname">snapcraft.formatting_utils.</code><code class="descname">pluralize</code><span class="sig-paren">(</span><em>container</em>, <em>if_one</em>, <em>if_multiple</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/formatting_utils.html#pluralize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.formatting_utils.pluralize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-snapcraft.main">
<span id="snapcraft-main-module"></span><h2>snapcraft.main module<a class="headerlink" href="#module-snapcraft.main" title="Permalink to this headline">¶</a></h2>
<p>snapcraft</p>
<dl class="docutils">
<dt>Usage:</dt>
<dd>snapcraft [options] [&#8211;enable-geoip &#8211;no-parallel-build]
snapcraft [options] init
snapcraft [options] pull [&lt;part&gt; ...]  [&#8211;enable-geoip]
snapcraft [options] build [&lt;part&gt; ...] [&#8211;no-parallel-build]
snapcraft [options] stage [&lt;part&gt; ...]
snapcraft [options] prime [&lt;part&gt; ...]
snapcraft [options] strip [&lt;part&gt; ...]
snapcraft [options] clean [&lt;part&gt; ...] [&#8211;step &lt;step&gt;]
snapcraft [options] snap [&lt;directory&gt; &#8211;output &lt;snap-file&gt;]
snapcraft [options] cleanbuild [&#8211;remote=&lt;remote&gt;]
snapcraft [options] login
snapcraft [options] logout
snapcraft [options] list-registered
snapcraft [options] registered
snapcraft [options] list-keys
snapcraft [options] keys
snapcraft [options] create-key [&lt;key-name&gt;]
snapcraft [options] register-key [&lt;key-name&gt;]
snapcraft [options] register &lt;snap-name&gt; [&#8211;private]
snapcraft [options] sign-build &lt;snap-file&gt; [&#8211;key-name=&lt;key-name&gt;] [&#8211;local]
snapcraft [options] upload &lt;snap-file&gt;
snapcraft [options] push &lt;snap-file&gt; [&#8211;release &lt;channels&gt;]
snapcraft [options] release &lt;snap-name&gt; &lt;revision&gt; &lt;channel&gt;
snapcraft [options] status &lt;snap-name&gt; [&#8211;series=&lt;series&gt;] [&#8211;arch=&lt;arch&gt;]
snapcraft [options] history &lt;snap-name&gt; [&#8211;series=&lt;series&gt;] [&#8211;arch=&lt;arch&gt;]
snapcraft [options] close &lt;snap-name&gt; &lt;channel_names&gt;...
snapcraft [options] list-plugins
snapcraft [options] plugins
snapcraft [options] tour [&lt;directory&gt;]
snapcraft [options] update
snapcraft [options] gated &lt;snap-name&gt;
snapcraft [options] validate &lt;snap-name&gt; &lt;validation&gt;... [&#8211;key-name=&lt;key-name&gt;]
snapcraft [options] define &lt;part-name&gt;
snapcraft [options] search [&lt;query&gt; ...]
snapcraft [options] enable-ci [&lt;ci-system&gt;] [&#8211;refresh]
snapcraft [options] help (topics | &lt;plugin&gt; | &lt;topic&gt;) [&#8211;devel]
snapcraft (-h | &#8211;help)
snapcraft &#8211;version</dd>
<dt>Options:</dt>
<dd><p class="first">-h &#8211;help                             show this help message and exit
-v &#8211;version                          show program version and exit
-d &#8211;debug                            print debug information while executing</p>
<blockquote>
<div>(including backtraces). When used with
cleanbuild, it opens a shell in case
of failure.</div></blockquote>
<table class="last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--target-arch <var>ARCH</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>EXPERIMENTAL: sets the target
architecture. Very few plugins support
this.</td></tr>
</tbody>
</table>
</dd>
<dt>Options specific to cleanbuild:</dt>
<dd><dl class="first last docutils">
<dt>&#8211;remote &lt;remote&gt; Use a specific lxd remote to run the cleanbuild on.</dt>
<dd>This requires prior setup which is described on:
<a class="reference external" href="https://linuxcontainers.org/lxd/getting-started-cli/#multiple-hosts">https://linuxcontainers.org/lxd/getting-started-cli/#multiple-hosts</a></dd>
</dl>
</dd>
<dt>Options specific to pulling:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--enable-geoip</span></kbd></td>
<td>enables geoip for the pull step if stage-packages
are used.</td></tr>
</tbody>
</table>
</dd>
<dt>Options specific to building:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--no-parallel-build</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>use only a single build job per part
(the default number of jobs per part is
equal to the number of CPUs)</td></tr>
</tbody>
</table>
</dd>
<dt>Options specific to cleaning:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-s <var>&lt;step&gt;</var></span>, <span class="option">--step <var>&lt;step&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>only clean the specified step and those
that depend upon it. &lt;step&gt; can be one
of: pull, build, stage or prime.</td></tr>
</tbody>
</table>
</dd>
<dt>Options specific to snapping:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">-o <var>&lt;snap-file&gt;</var></span>, <span class="option">--output <var>&lt;snap-file&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>used in case you want to rename the
snap.</td></tr>
</tbody>
</table>
</dd>
<dt>Options specific to store interaction:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--release <var>&lt;channels&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Comma separated list of channels to release to.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--series <var>&lt;series&gt;</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Snap series [default: {DEFAULT_SERIES}].</td></tr>
</tbody>
</table>
</dd>
<dt>The available commands are:</dt>
<dd><p class="first">help         Obtain help for a certain plugin or topic
init         Initialize a snapcraft project.
list-plugins List the available plugins that handle different types of part.
plugins      Alias for list-plugins.
login        Authenticate session against Ubuntu One SSO.
logout       Clear session credentials.
list-registered List snap names registered or shared with you.
registered   Alias for list-registered.
list-keys    List keys available for signing snaps.
keys         Alias for list-keys.
create-key   Create a key pair for signing snaps.
register-key Register a key for signing snaps.
register     Register the package name in the store.
tour         Setup the snapcraft examples tour in the specified directory,</p>
<blockquote>
<div>or ./snapcraft-tour/.</div></blockquote>
<p>sign-build   Sign a built snap file and assert it using the developer&#8217;s key.
push         Pushes and optionally releases a snap to the Ubuntu Store.
upload       DEPRECATED Upload a snap to the Ubuntu Store. The push command</p>
<blockquote>
<div>supersedes this command.</div></blockquote>
<p>release      Release a revision of a snap to a specific channel.
status       Show the current status of a snap per channel and architecture.
history      List all revisions of a snap.
close        Close one or more channels of a snap.
enable-ci    EXPERIMENTAL enable continuous-integration systems to build and</p>
<blockquote class="last">
<div>release snaps to the Ubuntu Store.</div></blockquote>
</dd>
<dt>The available lifecycle commands are:</dt>
<dd><p class="first">clean        Remove content - cleans downloads, builds or install artifacts.
cleanbuild   Create a snap using a clean environment managed by lxd.
pull         Download or retrieve artifacts defined for a part.
build        Build artifacts defined for a part. Build systems capable of</p>
<blockquote>
<div>running parallel build jobs will do so unless
&#8220;&#8211;no-parallel-build&#8221; is specified.</div></blockquote>
<p class="last">stage        Stage the part&#8217;s built artifacts into the common staging area.
prime        Final copy and preparation for the snap.
snap         Create a snap.</p>
</dd>
<dt>Parts ecosystem commands:</dt>
<dd>update       Updates the parts listing from the cloud.
define       Shows the definition for the cloud part.
search       Searches the remote parts cache for matching parts.</dd>
</dl>
<p>Calling snapcraft without a COMMAND will default to &#8216;snap&#8217;</p>
<p>The cleanbuild command requires a properly setup lxd environment that
can connect to external networks. Refer to the &#8220;Ubuntu Desktop and
Ubuntu Server&#8221; section on
<a class="reference external" href="https://linuxcontainers.org/lxd/getting-started-cli">https://linuxcontainers.org/lxd/getting-started-cli</a>
to get started.</p>
<p>For more help, visit the documentation:
<a class="reference external" href="http://snapcraft.io/docs/build-snaps">http://snapcraft.io/docs/build-snaps</a></p>
<dl class="function">
<dt id="snapcraft.main.main">
<code class="descclassname">snapcraft.main.</code><code class="descname">main</code><span class="sig-paren">(</span><em>argv=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/main.html#main"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.main.main" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="snapcraft.main.run">
<code class="descclassname">snapcraft.main.</code><code class="descname">run</code><span class="sig-paren">(</span><em>args</em>, <em>project_options</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/main.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.main.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-snapcraft.shell_utils">
<span id="snapcraft-shell-utils-module"></span><h2>snapcraft.shell_utils module<a class="headerlink" href="#module-snapcraft.shell_utils" title="Permalink to this headline">¶</a></h2>
<p>Utilities to run inside a correct snapcrafting environment.</p>
<dl class="function">
<dt id="snapcraft.shell_utils.which">
<code class="descclassname">snapcraft.shell_utils.</code><code class="descname">which</code><span class="sig-paren">(</span><em>command</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft/shell_utils.html#which"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.shell_utils.which" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the result of <cite>which</cite> run with the correct environment.</p>
</dd></dl>

</div>
<div class="section" id="module-snapcraft.sources">
<span id="snapcraft-sources-module"></span><h2>snapcraft.sources module<a class="headerlink" href="#module-snapcraft.sources" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-snapcraft">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-snapcraft" title="Permalink to this headline">¶</a></h2>
<p>Snapcraft plugins drive different build systems</p>
<p>Each part has a build system . Most parts are built from source using one of
a range of build systems such as CMake or Scons. Some parts are pre-built
and just copied into place, for example parts that reuse existing binary
packages.</p>
<p>You tell snapcraft which build system it must drive by specifying the
snapcraft plugin for that part. Every part must specify a plugin explicitly
(when you see a part that does not specify a plugin, thats because the
actual part definition is in the cloud, where the plugin is specified!)</p>
<p>These plugins implement a lifecycle over the following steps:</p>
<blockquote>
<div><ul class="simple">
<li>pull:   retrieve the source for the part from the specified location</li>
<li>build:  drive the build system determined by the choice of plugin</li>
<li>stage:  consolidate desireable files from all the parts in one tree</li>
<li>prime:  distill down to only the files which will go into the snap</li>
<li>snap:   compress the prime tree into the installable snap file</li>
</ul>
</div></blockquote>
<p>These steps correspond to snapcraft commands. So when you initiate a
&#8216;snapcraft pull&#8217; you will invoke the respective plugin for each part in
the snap, in sequence, to handle the source pull. Each part will then have a
fully populated parts/&lt;part-name&gt;/src/ directory. Similarly, if you then say
&#8216;snapcraft build&#8217; you will invoke the plugin responsible for each part in
turn, to build the part.</p>
<p># Snapcraft Lifecycle</p>
<p>## Pull</p>
<p>In this first step, source material is retrieved from the specified
location, whether that is a URL for a tarball, a local path to a source tree
inside the snap, a revision control reference to checkout, or something
specific to the plugin such as PyPI. The plugin might also download
necessary artifacts, such as the Java SDK, which are not specific to the
particular part but which are needed by the plugin to handle its type of
build system.</p>
<p>All the downloaded content for each part goes into the
<cite>parts/&lt;part-name&gt;/src/</cite> directory, which acts as a cache to prevent
re-fetching content. You can clean that cache out with &#8216;snapcraft clean&#8217;.</p>
<p>## Build</p>
<p>Snapcraft calculates an appropriate sequence to build the parts, based on
explicit &#8216;after&#8217; references and the order of the parts in the
snapcraft.yaml. Each part is built in the <cite>parts/&lt;part-name&gt;/build</cite>
directory and installed into <cite>parts/&lt;part-name&gt;/install</cite>.</p>
<p>Note the install step - we might actually want to use built artifacts from
one part in the build process of another, so the <cite>parts/&lt;part-name&gt;/install</cite>
directory is useful as a &#8216;working fresh install&#8217; of the part.</p>
<p>Between the plugin, the part definition YAML, and the build system of the
part, it is expected that the part can be built and installed in the right
place.</p>
<p>At this point you have a tree under <cite>parts/</cite> with a subdirectory for every
part, and underneath those, separate src, build and install trees for each
part.</p>
<p>## Stage</p>
<p>We now need to start consolidating the important pieces of each part into a
single tree. We do this twice - once in a very sweeping way that will
produce a lot of extraneous materials but is useful for debugging. This is
the &#8216;stage&#8217; step of the lifecycle, because we move a lot of the build output
from each part into a consolidated tree under <cite>stage/</cite> which has the
structure of a snap but has way too much extra information.</p>
<p>The important thing about the staging area is that it lets you get all the
shared libraries in one place and lets you find overlapping content in the
parts. You can also try this directory as if it were a snap, and you&#8217;ll have
all the debugging information in the tree, which is useful for developers.</p>
<p>Each part describes its own staging content - the files that should be
staged. The part will often describe &#8220;chunks&#8221; of content, called filesets,
so that they can be referred to as a useful set rather than having to call
out individual files.</p>
<p>## Prime</p>
<p>It is useful to have a directory tree which exactly mirrors the structure of
the final snap. This is the <cite>prime/</cite> directory, and the lifecycle includes a
&#8216;prime&#8217; step which copies only that final, required content from the
<cite>stage/</cite> directory into the <cite>prime/</cite> directory.</p>
<p>So the <cite>prime/</cite> directory contains only the content that will be put into
the final snap, unlike the staging area which may include debug and
development files not destined for your snap.</p>
<p>The snap metadata will also be placed in <cite>./prime/meta</cite> during the prime
step, so this <cite>./prime</cite> directory is useful for inspecting exactly what is
going into your snap or to conduct any final post-processing on snapcraft&#8217;s
output.</p>
<p>## Snap</p>
<p>The final step in the snapcraft lifecycle builds a snap out of the <cite>prime/</cite>
directory. It will be in the top level directory, alongside snapcraft.yaml,
called &lt;name&gt;-&lt;version&gt;-&lt;arch&gt;.snap</p>
<p># Standard part definition keywords</p>
<p>There are several builtin keywords which can be used in any part regardless
of the choice of plugin.</p>
<blockquote>
<div><ul>
<li><p class="first">after: [part, part, part...]</p>
<p>Snapcraft will make sure that it builds all of the listed parts before
it tries to build this part. Essentially these listed dependencies for
this part, useful when the part needs a library or tool built by another
part.</p>
<p>If such a dependency part is not defined in this snapcraft.yaml, it must
be defined in the cloud parts library, and snapcraft will retrieve the
definition of the part from the cloud. In this way, a shared library of
parts is available to every snap author - just say &#8216;after&#8217; and list the
parts you want that others have already defined.</p>
</li>
<li><p class="first">build-packages: [deb, deb, deb...]</p>
<p>A list of Ubuntu packages to install on the build host before building
the part. The files from these packages typically will not go into the
final snap unless they contain libraries that are direct dependencies of
binaries within the snap (in which case they&#8217;ll be discovered via <cite>ldd</cite>),
or they are explicitly described in stage-packages.</p>
</li>
<li><p class="first">stage-packages: YAML list</p>
<p>A set of Ubuntu packages to be downloaded and unpacked to join the part
before it&#8217;s built. Note that these packages are not installed on the host.
Like the rest of the part, all files from these packages will make it into
the final snap unless filtered out via the <cite>snap</cite> keyword.</p>
<p>One may simply specify packages in a flat list, in which case the packages
will be fetched and unpacked regardless of build environment. In addition,
a specific grammar made up of sub-lists is supported here that allows one
to filter stage packages depending on various selectors (e.g. the target
arch), as well as specify optional packages. The grammar is made up of two
nestable statements: &#8216;on&#8217; and &#8216;try&#8217;.</p>
<p>Let&#8217;s discuss <cite>on</cite>.</p>
<blockquote>
<div><ul class="simple">
<li>on &lt;selector&gt;[,&lt;selector&gt;...]:
- ...</li>
<li>else[ fail]:
- ...</li>
</ul>
</div></blockquote>
<p>The body of the &#8216;on&#8217; clause is taken into account if every (AND, not OR)
selector is true for the target build environment. Currently the only
selectors supported are target architectures (e.g. amd64).</p>
<p>If the &#8216;on&#8217; clause doesn&#8217;t match and it&#8217;s immediately followed by an &#8216;else&#8217;
clause, the &#8216;else&#8217; clause must be satisfied. An &#8216;on&#8217; clause without an
&#8216;else&#8217; clause is considered satisfied even if no selector matched. The
&#8216;else fail&#8217; form allows erroring out if an &#8216;on&#8217; clause was not matched.</p>
<p>For example, say you only wanted to stage <cite>foo</cite> if building for amd64 (and
not stage <cite>foo</cite> if otherwise):</p>
<blockquote>
<div><ul class="simple">
<li>on amd64: [foo]</li>
</ul>
</div></blockquote>
<p>Building on that, say you wanted to stage <cite>bar</cite> if building on an arch
other than amd64:</p>
<blockquote>
<div><ul class="simple">
<li>on amd64: [foo]</li>
<li>else: [bar]</li>
</ul>
</div></blockquote>
<p>You can nest these for more complex behaviors:</p>
<blockquote>
<div><ul class="simple">
<li>on amd64: [foo]</li>
<li>else:
- on i386: [bar]
- on armhf: [baz]</li>
</ul>
</div></blockquote>
<p>If your project requires a package that is only available on amd64, you can
fail if you&#8217;re not building for amd64:</p>
<blockquote>
<div><ul class="simple">
<li>on amd64: [foo]</li>
<li>else fail</li>
</ul>
</div></blockquote>
<p>Now let&#8217;s discuss <cite>try</cite>:</p>
<blockquote>
<div><ul class="simple">
<li>try:
- ...</li>
<li>else:
- ...</li>
</ul>
</div></blockquote>
<p>The body of the &#8216;try&#8217; clause is taken into account only when all packages
contained within it are valid. If not, if it&#8217;s immediately followed by
&#8216;else&#8217; clauses they are tried in order, and one of them must be satisfied.
A &#8216;try&#8217; clause with no &#8216;else&#8217; clause is considered satisfied even if it
contains invalid packages.</p>
<p>For example, say you wanted to stage <cite>foo</cite>, but it wasn&#8217;t available for all
architectures. Assuming your project builds without it, you can make it an
optional stage package:</p>
<blockquote>
<div><ul class="simple">
<li>try: [foo]</li>
</ul>
</div></blockquote>
<p>You can also add alternatives:</p>
<blockquote>
<div><ul class="simple">
<li>try: [foo]</li>
<li>else: [bar]</li>
</ul>
</div></blockquote>
<p>Again, you can nest these for more complex behaviors:</p>
<blockquote>
<div><ul class="simple">
<li>on amd64: [foo]</li>
<li>else:
- try: [bar]</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">organize: YAML</p>
<p>Snapcraft will rename files according to this YAML sub-section. The
content of the &#8216;organize&#8217; section consists of old path keys, and their
new values after the renaming.</p>
<p>This can be used to avoid conflicts between parts that use the same
name, or to map content from different parts into a common conventional
file structure. For example:</p>
<blockquote>
<div><dl class="docutils">
<dt>organize:</dt>
<dd><p class="first last">usr/oldfilename: usr/newfilename
usr/local/share/: usr/share/</p>
</dd>
</dl>
</div></blockquote>
<p>The key is the internal part filename, the value is the exposed filename
that will be used during the staging process. You can rename whole
subtrees of the part, or just specific files.</p>
<p>Note that the path is relative (even though it is &#8220;usr/local&#8221;) because
it refers to content underneath parts/&lt;part-name&gt;/install which is going
to be mapped into the stage and prime areas.</p>
</li>
<li><p class="first">filesets: YAML</p>
<p>When we map files into the stage and prime areas on the way to putting
them into the snap, it is convenient to be able to refer to groups of
files as well as individual files.  Snapcraft lets you name a fileset
and then use it later for inclusion or exclusion of those files from the
resulting snap.</p>
<p>For example, consider man pages of header files.. You might want them
in, or you might want to leave them out, but you definitely don&#8217;t want
to repeatedly have to list all of them either way.</p>
<p>This section is thus a YAML map of fileset names (the keys) to a list of
filenames. The list is built up by adding individual files or whole
subdirectory paths (and all the files under that path) and wildcard
globs, and then pruning from those paths.</p>
<p>The wildcard * globs all files in that path. Exclusions are denoted by
an initial <cite>-</cite>.</p>
<p>For example you could add usr/local/* then remove usr/local/man/<a href="#id1"><span class="problematic" id="id2">*</span></a>:</p>
<blockquote>
<div><dl class="docutils">
<dt>filesets:</dt>
<dd><p class="first last">allbutman: [ usr/local/<em>, -usr/local/man/</em> ]
manpages: [ usr/local/man ]</p>
</dd>
</dl>
</div></blockquote>
<p>Filenames are relative to the part install directory in
<cite>parts/&lt;part-name&gt;/install</cite>. If you have used &#8216;organize&#8217; to rename files
then the filesets will be built up from the names after organization.</p>
</li>
<li><p class="first">stage: YAML file and fileset list</p>
<p>A list of files from a part install directory to copy into <cite>stage/</cite>.
Rules applying to the list here are the same as those of filesets.
Referencing of fileset keys is done with a $ prefixing the fileset key,
which will expand with the value of such key.</p>
<p>For example:</p>
<blockquote>
<div><dl class="docutils">
<dt>stage:</dt>
<dd><ul class="first last simple">
<li>usr/lib/*   # Everything under parts/&lt;part-name&gt;/install/usr/lib</li>
<li>-usr/lib/libtest.so   # Excludng libtest.so</li>
<li>$manpages             # Including the &#8216;manpages&#8217; fileset</li>
</ul>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first">snap: YAML file and fileset list</p>
<p>A list of files from a part install directory to copy into <cite>prime/</cite>.
This section takes exactly the same form as the &#8216;stage&#8217; section  but the
files identified here will go into the ultimate snap (because the
<cite>prime/</cite> directory reflects the file structure of the snap with no
extraneous content).</p>
</li>
<li><p class="first">prepare: shell script</p>
<p>If present, the shell script defined here is run before the <cite>build</cite> step
of the plugin starts. The working directory is the base build
directory for the given part. The defined script is run with <cite>/bin/sh</cite>.</p>
<p>For example:</p>
<blockquote>
<div><dl class="docutils">
<dt>prepare: |</dt>
<dd><p class="first last">cd scripts
./bootstrap.sh</p>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first">build: shell script</p>
<p>If present, the shell script defined here is run instead of the <cite>build</cite>
step of the plugin. The working directory is the base build directory
for the given part. The defined script is run with <cite>/bin/sh</cite>.</p>
<p>For example:</p>
<blockquote>
<div><p>plugin: make
build: |</p>
<blockquote>
<div><p>make project
make test
make special-install</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">install: shell script</p>
<p>If present, the shell script defined here is run after the <cite>build</cite> step
of the plugin has finished. The working directory is the base build
directory for the given part. The defined script is run with <cite>/bin/sh</cite>.</p>
<p>For example:</p>
<blockquote>
<div><dl class="docutils">
<dt>install: |</dt>
<dd><p class="first last">sed -i &#8216;s|/usr/bin|$SNAP/usr/bin|g&#8217; my-bin-artifact.sh
mv my-bin-artifact.sh $SNAPCRAFT_PART_INSTALL/bin/my-bin-build.sh</p>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first">build-attributes: [attribute1, attribute2]</p>
<p>A list of special attributes that affect the build of this specific part.
Supported attributes:</p>
<blockquote>
<div><ul class="simple">
<li>no-system-libraries:
Do not automatically copy required libraries from the system to satisfy
the dependencies of this part. This might be useful if one knows these
dependencies will be satisfied in other manner, e.g. via content
sharing from other snaps.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<dl class="function">
<dt id="snapcraft.dict_constructor">
<code class="descclassname">snapcraft.</code><code class="descname">dict_constructor</code><span class="sig-paren">(</span><em>loader</em>, <em>node</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft.html#dict_constructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.dict_constructor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="snapcraft.dict_representer">
<code class="descclassname">snapcraft.</code><code class="descname">dict_representer</code><span class="sig-paren">(</span><em>dumper</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft.html#dict_representer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.dict_representer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="snapcraft.str_presenter">
<code class="descclassname">snapcraft.</code><code class="descname">str_presenter</code><span class="sig-paren">(</span><em>dumper</em>, <em>data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/snapcraft.html#str_presenter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#snapcraft.str_presenter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">snapcraft package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-snapcraft.common">snapcraft.common module</a></li>
<li><a class="reference internal" href="#module-snapcraft.config">snapcraft.config module</a></li>
<li><a class="reference internal" href="#module-snapcraft.file_utils">snapcraft.file_utils module</a></li>
<li><a class="reference internal" href="#module-snapcraft.formatting_utils">snapcraft.formatting_utils module</a></li>
<li><a class="reference internal" href="#module-snapcraft.main">snapcraft.main module</a></li>
<li><a class="reference internal" href="#module-snapcraft.shell_utils">snapcraft.shell_utils module</a></li>
<li><a class="reference internal" href="#module-snapcraft.sources">snapcraft.sources module</a></li>
<li><a class="reference internal" href="#module-snapcraft">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="modules.html">snapcraft</a><ul>
      <li>Previous: <a href="modules.html" title="previous chapter">snapcraft</a></li>
      <li>Next: <a href="snapcraft.integrations.html" title="next chapter">snapcraft.integrations package</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/snapcraft.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Canonical.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="_sources/snapcraft.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>